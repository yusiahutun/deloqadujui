<!doctype html><html class=no-js lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>Whats in a monorepo? Chris Coyier - ZestDash</title><script>(function(e,t){e[t]=e[t].replace("no-js","js")})(document.documentElement,"className")</script><meta name=description content="I think there is more talk about the how of monorepos than the why or the what. Once you know that youre going to go (or convert to) the monorepo format, there are all sorts of interesting technical challenges like sharing packages (or not), shared config, and whatnot. But why do it at all? That"><meta name=robots content="index,follow,noarchive"><meta property="og:title" content="Whats in a monorepo?  Chris Coyier"><meta property="og:description" content="I think there is more talk about the how of monorepos than the why or the what. Once you know that youre going to go (or convert to) the monorepo format, there are all sorts of interesting technical challenges like sharing packages (or not), shared config, and whatnot. But why do it at all? That"><meta property="og:type" content="article"><meta property="og:url" content="/whats-in-a-monorepo.html"><meta property="article:section" content="post"><meta property="article:published_time" content="2024-06-15T00:00:00+00:00"><meta property="article:modified_time" content="2024-06-15T00:00:00+00:00"><meta itemprop=name content="Whats in a monorepo?  Chris Coyier"><meta itemprop=description content="I think there is more talk about the how of monorepos than the why or the what. Once you know that youre going to go (or convert to) the monorepo format, there are all sorts of interesting technical challenges like sharing packages (or not), shared config, and whatnot. But why do it at all? That"><meta itemprop=datePublished content="2024-06-15T00:00:00+00:00"><meta itemprop=dateModified content="2024-06-15T00:00:00+00:00"><meta itemprop=wordCount content="743"><meta itemprop=keywords content><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/mainroad/css/style.css><link rel="shortcut icon" href=./favicon.ico></head><body class=body><div class="container container--outer"><header class=header><div class="container header__container"><div class=logo><a class=logo__link href=./index.html title=ZestDash rel=home><div class="logo__item logo__text"><div class=logo__title>ZestDash</div></div></a></div><div class=divider></div></div></header><div class="wrapper flex"><div class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>Whats in a monorepo? Chris Coyier</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 30 28"><path d="M15 0C7 0 1 6 1 14s6 14 14 14 14-6 14-14S23 0 15 0zm0 25C9 25 4 20 4 14S9 3 15 3s11 5 11 11-5 11-11 11zm1-18h-2v8.4l6.8 4.4L22 18l-6-3.8V7z"/></svg><time class=meta__text datetime=2024-06-15T00:00:00Z>June 15, 2024</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=./categories/blog/ rel=category>blog</a></span></div></div></header><div class="content post__content clearfix"><img src=https://cdn.statically.io/img/i0.wp.com/chriscoyier.net/wp-content/uploads/2021/07/IsUISvAq_400x400.jpg style=margin:auto;display:block;text-align:center;max-width:100%;height:auto><p>I think there is more talk about the <strong>how</strong> of monorepos than the <strong>why</strong> or the <strong>what</strong>.</p><p>Once you know that you’re going to go (or convert to) the monorepo format, there are all sorts of interesting technical challenges like sharing packages (or not), shared config, and whatnot. But why do it at all? That it isn’t painfully obvious. Like, <strong>what even is a monorepo, and under what circumstances would I need one?</strong></p><p>My first and only experience with monorepos is at CodePen where we’re now fully using a monorepo. It became most obvious to me in this situation:</p><pre class=wp-block-code aria-describedby=shcb-language-1 data-shcb-language-name=CSS data-shcb-language-slug=css><span><code class="hljs language-css"><span class=hljs-selector-tag>-</span> <span class=hljs-selector-tag>Next</span><span class=hljs-selector-class>.js</span> <span class=hljs-selector-tag>Site</span> — <span class=hljs-selector-tag>Ruby</span> <span class=hljs-selector-tag>on</span> <span class=hljs-selector-tag>Rails</span> <span class=hljs-selector-tag>Site</span> — <span class=hljs-selector-tag>Shared</span> <span class=hljs-selector-tag>Design</span> <span class=hljs-selector-tag>System</span> — <span class=hljs-selector-tag>Shared</span> <span class=hljs-selector-tag>Utilities</span></code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>CSS</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>css</span><span class=shcb-language__paren>)</span></pre><p>Those are the top-level folders of very important actively developed things. In other words, rather than each of them being a literal repo, we nested them all together in a single repo with a single parent, like:</p><pre class=wp-block-code aria-describedby=shcb-language-2 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript">— cp (Monorepo) — cpadmin (Next.js Site) — cprails (Ruby on Rails Site) — cplibrary (Bunch <span class=hljs-keyword>of</span> React Components) — cputil (Bunch <span class=hljs-keyword>of</span> JavaScript/<span class=hljs-built_in>JSON</span> files)</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>So all these important things are essentially side-by-side. I don’t want to nest my Next.js site within my Ruby on Rails site. I maybe could, but it feels weird and is off-the-beaten-path for the involved frameworks. Even weirder to put a Ruby on Rails site underneath a Next.js root site. That type of file system nesting just feels unnatural and can cause actual problems like file watchers and build systems getting confused about what it’s seeing.</p><p>It’s even more clear when you look at things the “Sites” share. If you have a design system, it feels best to have it live at the same level as the multiple sites that are reaching for it. It would be extra weird (and likely present real challenges to things like deployment) for one site to reach up not only outside its own root, but then back down again into some other site to pluck out components.</p><p>In actuality, our own repo is more like this:</p><pre class=wp-block-code aria-describedby=shcb-language-3 data-shcb-language-name=JavaScript data-shcb-language-slug=javascript><span><code class="hljs language-javascript">— cp (Monorepo) — cpadmin (Next.js Site) — cpxxx (More Future Next.js Sites) — cprails (Ruby on Rails Site) — cplibrary (Design System Components) — cputil (Bunch <span class=hljs-keyword>of</span> JavaScript/<span class=hljs-built_in>JSON</span> utility files) — cpclient (Shared Components/Hooks) — cpprocessors (Bunch <span class=hljs-keyword>of</span> AWS Lambdas) — cpworkers (Bunch <span class=hljs-keyword>of</span> Cloudflare Workers) — cpgo (API and other servers) — cpicons (Shared icons) — cpstyles (Shared CSS) — cpshots (Screenshot engine) — cpsearch (Search engine)</code></span><span class=shcb-language__label>Code language:</span> <span class=shcb-language__name>JavaScript</span> <span class=shcb-language__paren>(</span><span class=shcb-language__slug>javascript</span><span class=shcb-language__paren>)</span></pre><p>There is more. There is a lot of stuff that powers CodePen. Those integration tests gotta go somewhere to, ya know, test… the… integrations. <strong>It would be a pain in the ass if all this stuff was in separate repos.</strong> I would know, I was there. Now you pull, you got it all. It’s just easier.</p><p>What’s complicated is… a lot of stuff. Now for deployment, I can’t just “deploy everything in the repo”, which is a pretty common setup for tools like that. There needs to be code that detects when files in certain folders have changed and only deploy the changes in that folder in special particular ways. That’s non-trivial. Another complication is that not all site-building frameworks are designed to pluck files from outside their own root. I could go on and on, as the challenges of a monorepo are many.</p><p>But instead of getting more complex, let’s get less complex.</p><h2 class=wp-block-heading><a href=# aria-hidden=true class=aal_anchor id=a-monorepo-could-just-be-two-things></a>A monorepo could just be two things.</h2><p>For example:</p><pre class=wp-block-code><span><code class=hljs>— Monorepo — Docs Site — Main Site</code></span></pre><p>Two sites, but you just can’t be troubled to deal with them separately. Or it’s easier to have them both open and in sync all the time because you work on them together mostly.</p><p>Or maybe like:</p><pre class=wp-block-code><span><code class=hljs>— Monorepo — Main Site — Design System</code></span></pre><p>Design systems are great, and it can make a lot of sense to keep them independent. Or even if the design system is baked into the main site, it still could be like:</p><pre class=wp-block-code><span><code class=hljs>— Monorepo — Main Site — Storybook</code></span></pre><p>Your Storybook doesn’t need to be inside the main root because it doesn’t need to be deployed and changes to it probably shouldn’t trigger a deploy.</p><p>Or maybe it’s just one little thing that goes somewhere else like:</p><pre class=wp-block-code><span><code class=hljs>— Monorepo — WordPress Site — Cloudflare Worker</code></span></pre><p>Those two things are going to be deployed very differently, and thus should probably be sibling folders rather than nested in one another.</p><p><h3 class=jp-relatedposts-headline>Related</h3></p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmibmKe2tK%2FOsqCeql6jsrV7kWlpa2dganx0fY6wn5qso2K2r3nAZqSopp%2BnsrG7jg%3D%3D</p></div></article></main><nav class="pager flex"><div class="pager__item pager__item--prev"><a class=pager__link href=./witch-perfume.html rel=prev><span class=pager__subtitle>«&#8201;Previous</span><p class=pager__title>A Skeptic Unlocks Their Magic With This Scent</p></a></div><div class="pager__item pager__item--next"><a class=pager__link href=./reese-witherspoon-abs-star-46-flaunts-toned-tummy-html.html rel=next><span class=pager__subtitle>Next&#8201;»</span><p class=pager__title>Reese Witherspoon has abs! The star, 46, flaunts her toned tummy</p></a></div></nav></div><aside class=sidebar><div class="widget-recent widget"><h4 class=widget__title>Recent Posts</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./best-christmas-hats-for-virtual-parties.html>10 best Christmas hats for virtual festive parties</a></li><li class=widget__item><a class=widget__link href=./14-mind-blowing-facts-about-klementinum-library.html>14 Mind-blowing Facts About Klementinum Library</a></li><li class=widget__item><a class=widget__link href=./devon-windsor-wedding.html>Inside Devon Windsor &amp;amp; Johnny Barbara's Wedding in St. Barths</a></li><li class=widget__item><a class=widget__link href=./jay-z-takes-daughters-blue-ivy-12-and-rumi-6-to-the-superbowl-and-they-look-so-much-like-mom-beyonce.html>Jay-Z takes daughters Blue Ivy, 12, and Rumi, 6, to the Superbowl - and they look so much like mom B</a></li><li class=widget__item><a class=widget__link href=./542770-marjorie-harveys-net-worth-steve-harvey-marriage.html>Marjorie Harvey's net worth before and after Steve Harvey marriage</a></li></ul></div></div><div class="widget-categories widget"><h4 class=widget__title>Categories</h4><div class=widget__content><ul class=widget__list><li class=widget__item><a class=widget__link href=./categories/blog/>blog</a></li></ul></div></div></aside></div><footer class=footer><div class="container footer__container flex"><div class=footer__copyright>&copy; 2024 ZestDash.
<span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/Vimux/Mainroad/ rel="nofollow noopener" target=_blank>Mainroad</a> theme.</span></div></div></footer></div><script async defer src=https://assets.cdnweb.info/hugo/mainroad/js/menu.js></script>
<script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>